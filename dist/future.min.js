/*! Futurejs 0.1.0 2013-12-26 */
!function(){function a(a){return"[object Function]"==Object.prototype.toString.call(a)}var b=this,c=function(){this._callbacks=[]};c.prototype._pending=!0,c.prototype._data=null,c.prototype._error=null,c.prototype._withError=!1,c.prototype._callbacks=null,c.prototype.then=function(b,d){if(!a(b))throw new Error("Callback must be a function");var e=new c;return this._pending?(this._callbacks.push({onValue:b,onError:d,f:e}),e):(this._innerComplete({onValue:b,onError:d,f:e}),e)},c.prototype.catchError=function(){},c.prototype._complete=function(a){if(!this._pending)throw new Error("Future already completed");this._pending=!1,this._data=a;for(var b=this._callbacks.length,c=0;b>c;c++)this._innerComplete(this._callbacks[c])},c.prototype._innerComplete=function(a){var b=null;try{if(this._withError){if(!a.onError)throw this._error;b=a.onError(this._error)}else b=a.onValue(this._data)}catch(c){return a.f._completeError(c),void 0}a.f._complete(b)},c.prototype._completeError=function(a){if(!this._pending)throw new Error("Future already completed");this._pending=!1,this._withError=!0,this._error=a;for(var b=this._callbacks.length,c=0;b>c;c++)this._innerComplete(this._callbacks[c])};var d=function(){this.future=new c};d.prototype.future=null,d.prototype.complete=function(a){this.future._complete(a)},d.prototype.completeError=function(a){this.future._completeError(a)},"undefined"!=typeof exports?(module.exports.Future=c,module.exports.Completer=d):(b.Future=c,b.Completer=d)}();